{"head":{"title":"Using Istanbul With AVA","layout":"WithQuickStart","QuickStart":{"title":"AVA","cmd":"ava"},"description":"At the end of the day, all you need to do is place the bin nyc in front of the existing test scripts in your package.json: that's it! thisâ€¦"},"body":"<p>At the end of the day, all you need to do is place the bin <strong>nyc</strong> in front of the\nexisting test scripts in your package.json:</p>\n<pre><code class=\"hljs language-json\">{\n  <span class=\"hljs-attr\">\"scripts\"</span>: {\n    <span class=\"hljs-attr\">\"test\"</span>: <span class=\"hljs-string\">\"nyc ava --timeout=3000\"</span>\n  }\n}</code></pre>\n<p><em>that's it!</em> this will instrument the code that your tests execute, and any\nsubprocesses that it spawns.</p>\n<h2 id=\"using-alternative-reporters\"><a href=\"#using-alternative-reporters\" class=\"phenomic-HeadingAnchor\">#</a>Using Alternative Reporters</h2>\n<p>By default nyc uses Istanbul's <code>text</code> reporter. Various other reporters are\navailable in the <a href=\"https://github.com/istanbuljs/istanbul-reports/tree/master/lib\">istanbul-reports</a>\nrepo.</p>\n<p>If you'd like to specify alternate reporter, or would like to run\nmultiple reporters, simply use the <code>--reporter</code> flag.</p>\n<p><em>for instance, suppose you would like to output the default text report, along\nwith an HTML coverage report.</em></p>\n<pre><code class=\"hljs language-json\">{\n  <span class=\"hljs-attr\">\"scripts\"</span>: {\n    <span class=\"hljs-attr\">\"test\"</span>: <span class=\"hljs-string\">\"nyc --reporter=html --reporter=text ava\"</span>\n  }\n}</code></pre>\n<p>This will output the <code>text</code> report to the terminal, as well as outputting the\ndetailed <code>html</code> report to <code>./coverage/index.html</code>.</p>\n<h2 id=\"integrating-with-coveralls\"><a href=\"#integrating-with-coveralls\" class=\"phenomic-HeadingAnchor\">#</a>Integrating with Coveralls</h2>\n<p><a href=\"https://coveralls.io\">coveralls.io</a> is a great tool for adding coverage reporting to your continuous-integration flow. Here's how to get Istanbul\nintegrated with coveralls and <a href=\"https://travis-ci.org/\">travis-ci.org</a>:</p>\n<ol>\n<li>add the coveralls dependency to your module:</li>\n</ol>\n<pre><code class=\"hljs language-bash\">npm install coveralls --save-dev</code></pre>\n<ol start=\"2\">\n<li>update the scripts in your package.json to include a bin for reporting coverage to coveralls:</li>\n</ol>\n<pre><code class=\"hljs language-json\">{\n  <span class=\"hljs-attr\">\"script\"</span>: {\n     <span class=\"hljs-attr\">\"test\"</span>: <span class=\"hljs-string\">\"nyc --reporter=html --reporter=text ava\"</span>,\n     <span class=\"hljs-attr\">\"coverage\"</span>: <span class=\"hljs-string\">\"nyc report --reporter=text-lcov | coveralls\"</span>\n  }\n}</code></pre>\n<ol start=\"3\">\n<li>\n<p>For private repos, add the environment variable <code>COVERALLS_REPO_TOKEN</code> to Travis.</p>\n</li>\n<li>\n<p>add the following to your <code>.travis.yml</code>:</p>\n</li>\n</ol>\n<pre><code class=\"hljs language-yaml\"><span class=\"hljs-attr\">after_success:</span> npm run coverage</code></pre>\n<h2 id=\"what-about-typescript\"><a href=\"#what-about-typescript\" class=\"phenomic-HeadingAnchor\">#</a>What about TypeScript?</h2>\n<p><a href=\"https://github.com/avajs/ava/blob/master/docs/recipes/typescript.md\">AVA has a TypeScript recipe</a> that should get you started. Feel free to contribute to their docs or make a PR <a href=\"https://github.com/istanbuljs/istanbuljs.github.io\">here</a> if you have more details to share! :smile:</p>\n<h2 id=\"what-now\"><a href=\"#what-now\" class=\"phenomic-HeadingAnchor\">#</a>What Now?</h2>\n<p>nyc and Istanbul provide many advanced configuration options a good place to\nstart learning more is the <a href=\"https://github.com/istanbuljs/nyc\">istanbuljs/nyc README.</a></p>\n","__filename":"docs/tutorials/ava.md","__url":"/docs/tutorials/ava/","__resourceUrl":"/docs/tutorials/ava/index.html","__dataUrl":"/docs/tutorials/ava/index.html.8250ea8166a16577ab5641b36b6fe1e2.json"}